module.exports=[24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},21526,a=>{"use strict";var b=a.i(24868),c=a.i(14747);async function d(a,e="general"){if(!a||"object"!=typeof a||!a.size)return"";try{let d=await a.arrayBuffer(),f=Buffer.from(d),g=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=`${Date.now()}-${g}`,i=(0,c.join)(process.cwd(),"public","uploads",e);await (0,b.mkdir)(i,{recursive:!0});let j=(0,c.join)(i,h);return await (0,b.writeFile)(j,f),`/uploads/${e}/${h}`}catch(a){return console.error(`Erro ao salvar arquivo em ${e}:`,a),""}}a.s(["saveFile",()=>d])},2884,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(21526);async function f(a){try{let b=a.get("title"),f=a.get("location"),g=a.get("description"),h=a.get("date"),i=new Date;h&&(i=new Date(h));let j=a.get("bannerUrl"),k=await (0,e.saveFile)(j,"events");if(!b)return{error:"O título do evento é obrigatório."};return await c.prisma.event.create({data:{title:b,date:i,location:f||"",description:g||"",bannerUrl:k}}),(0,d.revalidatePath)("/admin/events"),(0,d.revalidatePath)("/"),{success:!0}}catch(a){return console.error("ERRO AO CRIAR EVENTO:",a),{error:"Erro ao agendar evento."}}}async function g(a){try{let b=a.get("id");if(!b)return{error:"ID do evento não encontrado."};let f=a.get("title"),g=a.get("location"),h=a.get("description"),i=a.get("date"),j=new Date;i&&(j=new Date(i));let k=a.get("bannerUrl"),l=a.get("existingBannerUrl");return k&&k.size>0&&(l=await (0,e.saveFile)(k,"events")),await c.prisma.event.update({where:{id:b},data:{title:f,date:j,location:g,description:h,bannerUrl:l}}),(0,d.revalidatePath)("/admin/events"),(0,d.revalidatePath)("/"),{success:!0}}catch(a){return console.error("ERRO AO ATUALIZAR EVENTO:",a),{error:"Erro ao atualizar evento."}}}async function h(a){let b=a.get("id");if(b)try{await c.prisma.event.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/events"),(0,d.revalidatePath)("/")}catch(a){console.error("Erro ao deletar:",a)}}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"40c045dacbf1c78586821a812bf6f001bd5f413b8a",null),(0,b.registerServerReference)(g,"409a087f5bdada1c30ab8aad517aa83555fe084edd",null),(0,b.registerServerReference)(h,"40b2ce2022ebe6200c5329aa8ffd4ad2b78c494b0b",null),a.s(["createEvent",()=>f,"deleteEvent",()=>h,"updateEvent",()=>g])},26101,a=>{"use strict";var b=a.i(2884);a.s([],28869),a.i(28869),a.s(["409a087f5bdada1c30ab8aad517aa83555fe084edd",()=>b.updateEvent,"40c045dacbf1c78586821a812bf6f001bd5f413b8a",()=>b.createEvent],26101)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__780f579c._.js.map