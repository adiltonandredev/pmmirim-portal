module.exports=[10961,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(77607),e=a.i(18558),f=a.i(72849);async function g(a){let b=a.get("name"),g=a.get("email"),h=a.get("role"),i=a.get("password"),j=a.get("confirmPassword"),k=await (0,d.auth)();if(!k||"ADMIN"!==k.user.role)return{error:"Sem permissão."};if(i!==j)return{error:"A confirmação de senha não confere."};if(await c.prisma.user.findUnique({where:{email:g}}))return{error:"Email já cadastrado."};let l=await (0,f.hash)(i,10);return await c.prisma.user.create({data:{name:b,email:g,password:l,role:"ADMIN"===h||"USER"===h?h:"USER"}}),(0,e.revalidatePath)("/admin/users"),{success:"Criado com sucesso!"}}async function h(a){let b=a.get("id"),g=a.get("name"),h=a.get("email"),i=a.get("role"),j=a.get("password"),k=a.get("confirmPassword"),l=await (0,d.auth)();if(!l||"ADMIN"!==l.user.role)return{error:"Não autorizado"};let m={name:g,email:h,role:"ADMIN"===i||"USER"===i?i:"USER"};if(j&&""!==j.trim()){if(j!==k)return{error:"As senhas não conferem!"};m.password=await (0,f.hash)(j,10)}try{return await c.prisma.user.update({where:{id:b},data:m}),(0,e.revalidatePath)("/admin/users"),{success:"Atualizado!"}}catch(a){return{error:"Erro ao atualizar."}}}async function i(a){let b=a.get("id"),f=await (0,d.auth)();if(f&&"ADMIN"===f.user.role&&f.user.id!==b)try{await c.prisma.user.delete({where:{id:b}}),(0,e.revalidatePath)("/admin/users")}catch(a){console.error("Erro ao excluir:",a)}}(0,a.i(13095).ensureServerEntryExports)([g,h,i]),(0,b.registerServerReference)(g,"403aef4243634b236429ba8d48a4dcc226948f93d5",null),(0,b.registerServerReference)(h,"400d0394cc64edc7d52be7a2eb37c17801bbc0aacb",null),(0,b.registerServerReference)(i,"40732e0caeee109949bf4f225440efa0b1186c62e2",null),a.s(["createUser",()=>g,"deleteUser",()=>i,"updateUser",()=>h])},94609,a=>{"use strict";var b=a.i(10961);a.s([],39075),a.i(39075),a.s(["400d0394cc64edc7d52be7a2eb37c17801bbc0aacb",()=>b.updateUser],94609)}];

//# sourceMappingURL=_a16579fd._.js.map