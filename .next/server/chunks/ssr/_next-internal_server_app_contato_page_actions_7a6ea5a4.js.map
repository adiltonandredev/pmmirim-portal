{"version":3,"sources":["../../../../src/app/actions/contact.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { prisma } from \"@/lib/prisma\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { contactMessageSchema } from \"@/lib/validations\" // Certifique-se que esse arquivo validations existe, senão remova essa linha e a validação\r\n\r\nexport async function sendContactMessage(formData: FormData) {\r\n  const data = {\r\n    name: formData.get(\"name\") as string,\r\n    email: formData.get(\"email\") as string,\r\n    subject: formData.get(\"subject\") as string,\r\n    message: formData.get(\"message\") as string,\r\n  }\r\n\r\n  // Se você não tiver o arquivo de validação, pode remover este bloco IF\r\n  /* const validation = contactMessageSchema.safeParse(data)\r\n  if (!validation.success) {\r\n    return { error: validation.error.errors[0].message }\r\n  }\r\n  */\r\n\r\n  try {\r\n    // Verifica se a tabela existe no seu schema.prisma, senão vai dar erro\r\n    // Se não tiver tabela, apenas simule o envio:\r\n    // console.log(\"Mensagem recebida:\", data);\r\n    \r\n    await prisma.contactMessage.create({\r\n      data: {\r\n        name: data.name,\r\n        email: data.email,\r\n        subject: data.subject || null,\r\n        message: data.message,\r\n      },\r\n    })\r\n\r\n    revalidatePath(\"/contato\")\r\n    return { success: \"Mensagem enviada com sucesso! Entraremos em contato em breve.\" }\r\n  } catch (error) {\r\n    console.error(error)\r\n    return { error: \"Erro ao enviar mensagem. Tente novamente.\" }\r\n  }\r\n}"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGO,eAAe,EAAmB,CAAkB,EACzD,IAAM,EAAO,CACX,KAAM,EAAS,GAAG,CAAC,QACnB,MAAO,EAAS,GAAG,CAAC,SACpB,QAAS,EAAS,GAAG,CAAC,WACtB,QAAS,EAAS,GAAG,CAAC,UACxB,EASA,GAAI,CAeF,OAVA,MAAM,EAAA,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CACjC,KAAM,CACJ,KAAM,EAAK,IAAI,CACf,MAAO,EAAK,KAAK,CACjB,QAAS,EAAK,OAAO,EAAI,KACzB,QAAS,EAAK,OAAO,AACvB,CACF,GAEA,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,YACR,CAAE,QAAS,+DAAgE,CACpF,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,GACP,CAAE,MAAO,2CAA4C,CAC9D,CACF,0CAnCsB,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA"}