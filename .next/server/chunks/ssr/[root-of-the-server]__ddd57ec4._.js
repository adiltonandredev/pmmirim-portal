module.exports=[24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},21526,a=>{"use strict";var b=a.i(24868),c=a.i(14747);async function d(a,e="general"){if(!a||"object"!=typeof a||!a.size)return"";try{let d=await a.arrayBuffer(),f=Buffer.from(d),g=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=`${Date.now()}-${g}`,i=(0,c.join)(process.cwd(),"public","uploads",e);await (0,b.mkdir)(i,{recursive:!0});let j=(0,c.join)(i,h);return await (0,b.writeFile)(j,f),`/uploads/${e}/${h}`}catch(a){return console.error(`Erro ao salvar arquivo em ${e}:`,a),""}}a.s(["saveFile",()=>d])},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},91662,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(21526),f=a.i(24868),g=a.i(14747),h=a.i(22734);async function i(a){try{let b=a.get("title"),f=a.get("description"),g=a.get("link"),h=a.get("type"),i=parseInt(a.get("order"))||0,j="on"===a.get("active"),k=a.get("image"),l=await (0,e.saveFile)(k,"banners");if(!l)return{error:"A imagem do banner é obrigatória."};return await c.prisma.banner.create({data:{title:b,description:f,link:g,imageUrl:l,order:i,active:j,type:h||"HOME"}}),(0,d.revalidatePath)("/"),(0,d.revalidatePath)("/parceiros"),(0,d.revalidatePath)("/admin/banners"),{success:!0}}catch(a){return console.error("Erro ao criar banner:",a),{error:"Erro ao salvar banner."}}}async function j(a){try{let b=a.get("id");if(!b)return{error:"ID não encontrado."};let f=a.get("title"),g=a.get("description"),h=a.get("link"),i=a.get("type"),j=parseInt(a.get("order"))||0,k="on"===a.get("active"),l=a.get("image"),m=a.get("existingImageUrl");return l&&l.size>0&&(m=await (0,e.saveFile)(l,"banners")),await c.prisma.banner.update({where:{id:b},data:{title:f,description:g,link:h,imageUrl:m,order:j,active:k,type:i}}),(0,d.revalidatePath)("/"),(0,d.revalidatePath)("/parceiros"),(0,d.revalidatePath)("/admin/banners"),{success:!0}}catch(a){return console.error("Erro ao atualizar banner:",a),{error:"Erro ao atualizar."}}}async function k(a){let b="string"==typeof a?a:a.get("id");if(b)try{let a=await c.prisma.banner.findUnique({where:{id:b}});if(a?.imageUrl)try{let b=(0,g.join)(process.cwd(),"public",a.imageUrl);(0,h.existsSync)(b)&&await (0,f.unlink)(b)}catch(a){}await c.prisma.banner.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/banners"),(0,d.revalidatePath)("/")}catch(a){console.error("Erro ao excluir banner:",a)}}async function l(a,b){if(a)try{await c.prisma.banner.update({where:{id:a},data:{active:!b}}),(0,d.revalidatePath)("/admin/banners"),(0,d.revalidatePath)("/")}catch(a){console.error("Erro ao alternar banner:",a)}}(0,a.i(13095).ensureServerEntryExports)([i,j,k,l]),(0,b.registerServerReference)(i,"408798389a74036830df79f798babcba1913186541",null),(0,b.registerServerReference)(j,"407a83ab8d9fc81907190df3845e351e8b9cab2b7f",null),(0,b.registerServerReference)(k,"400c0cf71586cf066ae0e25661b58d3340c4a0fed5",null),(0,b.registerServerReference)(l,"602645857faf7ee2ffcbabf02f8504c21df129e409",null),a.s(["createBanner",()=>i,"deleteBanner",()=>k,"toggleBannerActive",()=>l,"updateBanner",()=>j])},1997,a=>{"use strict";var b=a.i(91662);a.s([],54684),a.i(54684),a.s(["407a83ab8d9fc81907190df3845e351e8b9cab2b7f",()=>b.updateBanner,"408798389a74036830df79f798babcba1913186541",()=>b.createBanner],1997)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ddd57ec4._.js.map