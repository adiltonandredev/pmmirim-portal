module.exports=[24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},21526,a=>{"use strict";var b=a.i(24868),c=a.i(14747);async function d(a,e="general"){if(!a||"object"!=typeof a||!a.size)return"";try{let d=await a.arrayBuffer(),f=Buffer.from(d),g=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=`${Date.now()}-${g}`,i=(0,c.join)(process.cwd(),"public","uploads",e);await (0,b.mkdir)(i,{recursive:!0});let j=(0,c.join)(i,h);return await (0,b.writeFile)(j,f),`/uploads/${e}/${h}`}catch(a){return console.error(`Erro ao salvar arquivo em ${e}:`,a),""}}a.s(["saveFile",()=>d])},52806,a=>{"use strict";var b=a.i(37936),c=a.i(24868),d=a.i(14747);async function e(a){let b=a.get("file");if(!b)throw Error("Nenhum arquivo enviado");let e=await b.arrayBuffer(),f=Buffer.from(e),g=`${Date.now()}-${b.name.replace(/\s/g,"-")}`,h=(0,d.join)(process.cwd(),"public","uploads");try{await (0,c.mkdir)(h,{recursive:!0})}catch(a){}let i=(0,d.join)(h,g);return await (0,c.writeFile)(i,f),`/uploads/${g}`}(0,a.i(13095).ensureServerEntryExports)([e]),(0,b.registerServerReference)(e,"401628db911d95f41b15dc4a76335400ed4d4ce6ea",null),a.s(["uploadImage",()=>e])},58713,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(21526);async function f(a){try{let b=a.get("title"),f=a.get("summary"),g=a.get("content"),h=a.get("coverImage"),i=await (0,e.saveFile)(h,"news");if(!b)return{error:"O título é obrigatório."};let j=b.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");return await c.prisma.post.findUnique({where:{slug:j}})&&(j=`${j}-${Date.now()}`),await c.prisma.post.create({data:{title:b,slug:j,summary:f||"",content:g||"",coverImage:i,type:"NEWS",published:"on"===a.get("published"),featured:"on"===a.get("featured")}}),(0,d.revalidatePath)("/admin/posts"),(0,d.revalidatePath)("/"),(0,d.revalidatePath)("/noticias"),{success:!0}}catch(a){return console.error("ERRO AO CRIAR POST:",a),{error:"Erro ao criar notícia."}}}async function g(a){try{let b=a.get("id");if(!b)return{error:"ID não encontrado."};let f=a.get("title"),g=a.get("summary"),h=a.get("content"),i=a.get("coverImage"),j=a.get("existingCoverImage");return i&&i.size>0&&(j=await (0,e.saveFile)(i,"news")),await c.prisma.post.update({where:{id:b},data:{title:f,summary:g,content:h,coverImage:j,type:"NEWS",published:"on"===a.get("published"),featured:"on"===a.get("featured")}}),(0,d.revalidatePath)("/admin/posts"),(0,d.revalidatePath)("/"),(0,d.revalidatePath)("/noticias"),{success:!0}}catch(a){return console.error("ERRO AO ATUALIZAR POST:",a),{error:"Erro ao atualizar notícia."}}}async function h(a){let b=a.get("id");if(b)try{await c.prisma.post.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/posts"),(0,d.revalidatePath)("/")}catch(a){console.error("Erro ao deletar:",a)}}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"40642ce18f8bacc75ac8819419046338844057e017",null),(0,b.registerServerReference)(g,"409ac4b16750fa1890d3eb1d67d56bfe5863f56601",null),(0,b.registerServerReference)(h,"40db43506c7851ae30b10e5de5b977e7f5a7f90112",null),a.s(["createPost",()=>f,"deletePost",()=>h,"updatePost",()=>g])},49132,a=>{"use strict";var b=a.i(58713),c=a.i(52806);a.s([],70680),a.i(70680),a.s(["401628db911d95f41b15dc4a76335400ed4d4ce6ea",()=>c.uploadImage,"40642ce18f8bacc75ac8819419046338844057e017",()=>b.createPost,"409ac4b16750fa1890d3eb1d67d56bfe5863f56601",()=>b.updatePost],49132)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__05181a86._.js.map