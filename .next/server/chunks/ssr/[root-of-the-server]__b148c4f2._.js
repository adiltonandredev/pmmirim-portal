module.exports=[24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},21526,a=>{"use strict";var b=a.i(24868),c=a.i(14747);async function d(a,e="general"){if(!a||"object"!=typeof a||!a.size)return"";try{let d=await a.arrayBuffer(),f=Buffer.from(d),g=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=`${Date.now()}-${g}`,i=(0,c.join)(process.cwd(),"public","uploads",e);await (0,b.mkdir)(i,{recursive:!0});let j=(0,c.join)(i,h);return await (0,b.writeFile)(j,f),`/uploads/${e}/${h}`}catch(a){return console.error(`Erro ao salvar arquivo em ${e}:`,a),""}}a.s(["saveFile",()=>d])},41539,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(21526);async function f(a){try{let b={title:a.get("title"),description:a.get("description"),content:a.get("content"),duration:a.get("duration"),targetAge:a.get("targetAge"),sponsorName:a.get("sponsorName"),active:"on"===a.get("active")},f=a.get("coverImage"),g=await (0,e.saveFile)(f,"courses"),h=a.get("sponsorLogo"),i=await (0,e.saveFile)(h,"courses"),j=b.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")+"-"+Date.now().toString().slice(-4);return await c.prisma.course.create({data:{...b,slug:j,coverImage:g,sponsorLogo:i,featured:!1}}),(0,d.revalidatePath)("/admin/courses"),(0,d.revalidatePath)("/cursos"),{success:!0}}catch(a){return console.error("Error creating course:",a),{error:"Erro ao salvar curso."}}}async function g(a){try{let b=a.get("id"),f=a.get("coverImage"),g=a.get("existingCoverImage");f&&f.size>0&&(g=await (0,e.saveFile)(f,"courses"));let h=a.get("sponsorLogo"),i=a.get("existingSponsorLogo");h&&h.size>0&&(i=await (0,e.saveFile)(h,"courses"));let j={title:a.get("title"),description:a.get("description"),content:a.get("content"),duration:a.get("duration"),targetAge:a.get("targetAge"),sponsorName:a.get("sponsorName"),active:"on"===a.get("active"),coverImage:g,sponsorLogo:i};return await c.prisma.course.update({where:{id:b},data:j}),(0,d.revalidatePath)("/admin/courses"),(0,d.revalidatePath)("/cursos"),{success:!0}}catch(a){return console.error("Error updating course:",a),{error:"Erro ao atualizar curso."}}}async function h(a){let b=a.get("id");if(b)try{await c.prisma.course.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/courses"),(0,d.revalidatePath)("/cursos")}catch(a){console.error("Erro ao excluir curso:",a)}}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"4064bb6951be399a71e6c49788a76238e850e42e8a",null),(0,b.registerServerReference)(g,"408e9b187562794d6da5e7f8f3f516c03380d786e2",null),(0,b.registerServerReference)(h,"400324d41ad82199650de139998c4e114927db4780",null),a.s(["createCourse",()=>f,"deleteCourse",()=>h,"updateCourse",()=>g])},18381,a=>{"use strict";var b=a.i(41539);a.s([],28211),a.i(28211),a.s(["400324d41ad82199650de139998c4e114927db4780",()=>b.deleteCourse,"4064bb6951be399a71e6c49788a76238e850e42e8a",()=>b.createCourse,"408e9b187562794d6da5e7f8f3f516c03380d786e2",()=>b.updateCourse],18381)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b148c4f2._.js.map