module.exports=[24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},21526,a=>{"use strict";var b=a.i(24868),c=a.i(14747);async function d(a,e="general"){if(!a||"object"!=typeof a||!a.size)return"";try{let d=await a.arrayBuffer(),f=Buffer.from(d),g=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=`${Date.now()}-${g}`,i=(0,c.join)(process.cwd(),"public","uploads",e);await (0,b.mkdir)(i,{recursive:!0});let j=(0,c.join)(i,h);return await (0,b.writeFile)(j,f),`/uploads/${e}/${h}`}catch(a){return console.error(`Erro ao salvar arquivo em ${e}:`,a),""}}a.s(["saveFile",()=>d])},985,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(21526);async function f(a){try{let b=a.get("name"),f=a.get("role"),g=a.get("category"),h=a.get("bio"),i=a.get("instagram"),j=a.get("email"),k=parseInt(a.get("order")||"0"),l=a.get("image"),m=await (0,e.saveFile)(l,"team");if(!b)return{error:"Nome é obrigatório."};return await c.prisma.teamMember.create({data:{name:b,role:f,category:g,bio:h,image:m,instagram:i,email:j,order:k}}),(0,d.revalidatePath)("/admin/institution/team"),(0,d.revalidatePath)("/instituicao/equipe"),(0,d.revalidatePath)("/instituicao/diretoria"),{success:!0}}catch(a){return console.error("Erro ao criar membro:",a),{error:"Erro ao salvar."}}}async function g(a){try{let b=a.get("id");if(!b)return{error:"ID não encontrado."};let f=a.get("name"),g=a.get("role"),h=a.get("category"),i=a.get("bio"),j=a.get("instagram"),k=a.get("email"),l=parseInt(a.get("order")||"0"),m=a.get("image"),n=a.get("existingImage");return m&&m.size>0&&(n=await (0,e.saveFile)(m,"team")),await c.prisma.teamMember.update({where:{id:b},data:{name:f,role:g,category:h,bio:i,image:n,instagram:j,email:k,order:l}}),(0,d.revalidatePath)("/admin/institution/team"),(0,d.revalidatePath)("/instituicao/equipe"),(0,d.revalidatePath)("/instituicao/diretoria"),{success:!0}}catch(a){return console.error("Erro ao atualizar membro:",a),{error:"Erro ao atualizar."}}}async function h(a){let b=a.get("id");if(b)try{await c.prisma.teamMember.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/institution/team"),(0,d.revalidatePath)("/instituicao/equipe"),(0,d.revalidatePath)("/instituicao/diretoria")}catch(a){console.error("Erro ao excluir:",a)}}async function i(a){try{return await c.prisma.teamMember.findMany({where:a?{category:a}:{},orderBy:{order:"asc"}})}catch(a){return console.error("Erro ao buscar equipe:",a),[]}}(0,a.i(13095).ensureServerEntryExports)([f,g,h,i]),(0,b.registerServerReference)(f,"409aaad86672a127821d1c9a809d7a6feef569a2ae",null),(0,b.registerServerReference)(g,"40a5f44924e44ddd17e17d920f36c235d18522fbd1",null),(0,b.registerServerReference)(h,"400ad3641b13d0e39168d8cca5152572bd5fc9fd0c",null),(0,b.registerServerReference)(i,"40a6683edf5560a0270f3975ed974b1c1f4b336eed",null),a.s(["createTeamMember",()=>f,"deleteTeamMember",()=>h,"getTeamMembers",()=>i,"updateTeamMember",()=>g])},6350,a=>{"use strict";var b=a.i(985);a.s([],41866),a.i(41866),a.s(["409aaad86672a127821d1c9a809d7a6feef569a2ae",()=>b.createTeamMember,"40a5f44924e44ddd17e17d920f36c235d18522fbd1",()=>b.updateTeamMember],6350)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__90948933._.js.map