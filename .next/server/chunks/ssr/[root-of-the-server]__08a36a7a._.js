module.exports=[24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},21526,a=>{"use strict";var b=a.i(24868),c=a.i(14747);async function d(a,e="general"){if(!a||"object"!=typeof a||!a.size)return"";try{let d=await a.arrayBuffer(),f=Buffer.from(d),g=a.name.replace(/[^a-zA-Z0-9.-]/g,"_"),h=`${Date.now()}-${g}`,i=(0,c.join)(process.cwd(),"public","uploads",e);await (0,b.mkdir)(i,{recursive:!0});let j=(0,c.join)(i,h);return await (0,b.writeFile)(j,f),`/uploads/${e}/${h}`}catch(a){return console.error(`Erro ao salvar arquivo em ${e}:`,a),""}}a.s(["saveFile",()=>d])},17151,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558),e=a.i(21526);async function f(a){try{let b=a.get("name"),f=a.get("role"),g=a.get("date"),h="on"===a.get("active"),i=new Date;g&&(i=new Date(`${g}T12:00:00`));let j=a.get("photoUrl"),k=await (0,e.saveFile)(j,"birthdays");if(!b||!g)return{error:"Nome e Data são obrigatórios."};return await c.prisma.birthday.create({data:{name:b,role:f,date:i,photoUrl:k,active:h}}),(0,d.revalidatePath)("/admin/birthdays"),(0,d.revalidatePath)("/"),{success:!0}}catch(a){return console.error("Erro ao criar:",a),{error:"Erro ao salvar."}}}async function g(a){try{let b=a.get("id");if(!b)return{error:"ID não encontrado."};let f=a.get("name"),g=a.get("role"),h=a.get("date"),i="on"===a.get("active"),j=new Date;h&&(j=new Date(`${h}T12:00:00`));let k=a.get("photoUrl"),l=a.get("existingPhotoUrl");return k&&k.size>0&&(l=await (0,e.saveFile)(k,"birthdays")),await c.prisma.birthday.update({where:{id:b},data:{name:f,role:g,date:j,photoUrl:l,active:i}}),(0,d.revalidatePath)("/admin/birthdays"),(0,d.revalidatePath)("/"),{success:!0}}catch(a){return console.error("Erro ao atualizar:",a),{error:"Erro ao atualizar."}}}async function h(a){let b=a.get("id");if(b)try{await c.prisma.birthday.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/birthdays"),(0,d.revalidatePath)("/")}catch(a){console.error("Erro ao excluir:",a)}}(0,a.i(13095).ensureServerEntryExports)([f,g,h]),(0,b.registerServerReference)(f,"404ed97b74fff16508790c1b1e420b8b45e89935f1",null),(0,b.registerServerReference)(g,"40a08e5edd3dce4d25b339857f42ea342effbb1e83",null),(0,b.registerServerReference)(h,"40c73f57e28ba1beae8fba38232340e863da397764",null),a.s(["createBirthday",()=>f,"deleteBirthday",()=>h,"updateBirthday",()=>g])},23133,a=>{"use strict";var b=a.i(17151);a.s([],4721),a.i(4721),a.s(["404ed97b74fff16508790c1b1e420b8b45e89935f1",()=>b.createBirthday,"40a08e5edd3dce4d25b339857f42ea342effbb1e83",()=>b.updateBirthday],23133)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__08a36a7a._.js.map