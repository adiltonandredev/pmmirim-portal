module.exports=[49829,a=>{"use strict";var b=a.i(37936),c=a.i(66518),d=a.i(18558);function e(a,b){return a instanceof FormData?a.get(b):a[b]}async function f(a,b){if(a&&"object"==typeof a&&null!==a&&"size"in a&&"arrayBuffer"in a&&a.size>0)try{let b=await a.arrayBuffer(),c=Buffer.from(b).toString("base64"),d=a.type||"image/jpeg";return`data:${d};base64,${c}`}catch(a){console.error("Erro imagem aluno:",a)}return b||""}async function g(a){try{let b=e(a,"studentName"),g=e(a,"achievement"),h=e(a,"class"),i=e(a,"description"),j=Number(e(a,"month")),k=Number(e(a,"year")),l=e(a,"photoUrl"),m=await f(l);if(!b)throw Error("Nome é obrigatório.");return await c.prisma.featuredStudent.create({data:{studentName:b,achievement:g||"Destaque do Mês",class:h||"",description:i||"",month:j||new Date().getMonth()+1,year:k||new Date().getFullYear(),photoUrl:m,active:!0}}),(0,d.revalidatePath)("/admin/featured-student"),(0,d.revalidatePath)("/"),{success:!0}}catch(a){throw console.error("ERRO CRIAR ALUNO:",a),a}}async function h(a){try{let b=e(a,"id")||(a instanceof FormData?a.get("id"):null);if(!b)throw Error("ID não encontrado.");let g=e(a,"studentName"),h=e(a,"achievement"),i=e(a,"class"),j=e(a,"description"),k=Number(e(a,"month")),l=Number(e(a,"year")),m=e(a,"photoUrl"),n=e(a,"existingPhotoUrl"),o=await f(m,n),p=e(a,"active");return await c.prisma.featuredStudent.update({where:{id:b},data:{studentName:g,achievement:h,class:i,description:j,month:k,year:l,photoUrl:o,active:"on"===p||!0===p}}),(0,d.revalidatePath)("/admin/featured-student"),(0,d.revalidatePath)("/"),{success:!0}}catch(a){throw console.error("ERRO ATUALIZAR ALUNO:",a),a}}async function i(a){let b=a.get("id");if(b)try{await c.prisma.featuredStudent.delete({where:{id:b}}),(0,d.revalidatePath)("/admin/featured-student"),(0,d.revalidatePath)("/")}catch(a){console.error("Erro ao deletar:",a)}}(0,a.i(13095).ensureServerEntryExports)([g,h,i]),(0,b.registerServerReference)(g,"405faf590e8a13cf7156ec36a38743faf0f0af3a13",null),(0,b.registerServerReference)(h,"407083e883aa7b162a537c5369da69858dea5ff92a",null),(0,b.registerServerReference)(i,"40b66264851c977eca24b689db38029425303eb1b1",null),a.s(["createFeaturedStudent",()=>g,"deleteFeaturedStudent",()=>i,"updateFeaturedStudent",()=>h])},64597,a=>{"use strict";var b=a.i(49829);a.s([],91734),a.i(91734),a.s(["405faf590e8a13cf7156ec36a38743faf0f0af3a13",()=>b.createFeaturedStudent,"407083e883aa7b162a537c5369da69858dea5ff92a",()=>b.updateFeaturedStudent],64597)}];

//# sourceMappingURL=_420b51b9._.js.map